<!DOCTYPE html>
<html lang="de">
<!-- Beispiel f端r Ereignisverarbeitung, DOM Manipulation, dynamisches Styling und Validierung -->

<head>
  <meta charset="utf-8">
  <title>Geheimzahl</title>
  <style>
    #error {
      color: red;
      display: none;
    }

    #pin.invalid {
      border-color: red;
      border-style: solid;
    }
  </style>
  <script>
    /* Nach dem Laden der Seite:
      1. Den Absenden-Button deaktivieren.
      2. Die Funktion checkPin als EventHandler f端r einen Tastendruck im Eingabefeld registrieren.
      3. Dem Eingabefeld den Fokus geben.
    */
    
    
    
    window.addEventListener("load", function () {
        const sendButton = document.getElementById("go");
        sendButton.disabled = true;
        const inputField = document.getElementById("pin");
        inputField.addEventListener("keyup", checkPin);
        inputField.focus();
    });

    

    /* Im Event-Handler soll Folgendes gemacht werden:
      1. Falls etwas anderes als die Ziffern 0 bis 9 eingegeben werden:
        a) Das div-Element mit der Fehlermeldung anzeigen.
        b) Dem Eingabefeld die CSS-Klasse "invalid" zuweisen.
      2. Falls die Eingabe nur aus den Ziffern 0 bis 9 besteht:
        a) Das div-Element mit der Fehlermeldung ausblenden.
        b) Dem Eingabefeld die CSS-Klasse "invalid" entziehen.
      3. Falls genau 6 Ziffern eingegeben wurden, soll der Absenden-Button aktiviert werden,
         ansonsten soll er deaktiviert werden. 
    */
    function checkPin(event) {
        let text = event.value;
        const error = document.getElementById("error");
        if(!isValid(text)) {
          // a) Das div-Element mit der Fehlermeldung anzeigen.
          error.disabled = false
          // b) Dem Eingabefeld die CSS-Klasse "invalid" zuweisen.
        }
        else {
          // a) Das div-Element mit der Fehlermeldung ausblenden.
          // b) Dem Eingabefeld die CSS-Klasse "invalid" entziehen.
        }

    }


    function isValid(number) {
        for (let i = 0; i < number.length; i++) {
          const charCode = number.charCodeAt(i);
          // Die Ziffern 0 bis 9 haben die Unicode-Werte 48 bis 57.
          if (charCode < 48 || charCode > 57) return false;
        }
    }


  </script>
</head>

<body>
  <form action="#" method="post" onsubmit="alert('Geheimzahl wird 端berpr端ft...')">
    <p>
      <label for="pin">Geheimzahl: </label>
      <input id="pin" type="text" size="6" maxlength="6" title="Die Geheimzahl besteht aus sechs Ziffern von 0 bis 9" />
      <input id="go" type="submit"/>
    </p>
    <div id="error">Die Geheimzahl besteht aus sechs Ziffern von 0 bis 9.</div>
  </form>
</body>

</html>